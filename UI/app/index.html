<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body ng-app="esbdocPocApp">
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div ng-controller="MainCtrl" ng-cloak>
      <div ng-if="!esbDoc">
        <h3>No ESB Doc datafile found. Please store file in the same folder as this file with the name ESBDOCDATA.js</h3>
      </div>
      <div ng-if="esbDoc" class="container-fluid" ng-init="selected.resource = ''; search = '';">
        <div class="row">
          <div class="col-sm-4 col-md-3 col-lg-2">
            <h1 style="font-size: 1.3em;">ESB Doc Viewer</h1>

            <div class="form-group" style="position: relative;">
              <input class="form-control" type="text" ng-model="search" placeholder="Which resource are you looking for?"/>
              <span class="glyphicon glyphicon-remove-circle searchclear" ng-show="search != ''" ng-click="search = ''"></span>
            </div>
            <ul class="nav nav-pills nav-stacked" style="max-height: 30em; overflow-y: scroll;">
              <li ng-repeat="(name, value) in searchResourcesFilter(esbDoc.resources, search)" style="width: 100%; overflow-x: hidden;">
                <a href="" ng-click="selected.resource = name" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 100%;">{{value.humanizedName}}</a>
              </li>
            </ul>
          </div>
          <div class="col-sm-8 col-md-9 col-lg-10">

            <div ng-if="!selected.resource">
              <h2>{{numberOfResources}} resources and {{numberOfDependencies}} dependencies documented</h2>
              <p>Please select a resource from the menu.</p>
            </div>

            <div ng-if="selected.resource">
              <h1><small>{{esbDoc.resources[selected.resource].type ? esbDoc.resources[selected.resource].type : 'Resource'}}</small> {{esbDoc.resources[selected.resource].humanizedName}}</h1>
              <p class="lead">{{esbDoc.resources[selected.resource].purpose}}</p>
              <p><b>Receives:</b> {{esbDoc.resources[selected.resource].receives.description}}</p>
              <ul ng-if="esbDoc.resources[selected.resource].receives.fields">
                <li ng-repeat="field in esbDoc.resources[selected.resource].receives.fields">
                  {{field.path}} <span ng-if="field.description">&ndash;</span> {{field.description}} <span  ng-if="field.optional !== true">(required)</span>
                </li>
              </ul>
              <pre class="pre-scrollable" ng-if="esbDoc.resources[selected.resource].receives.example">{{esbDoc.resources[selected.resource].receives.example}}</pre>
              <p><b>Returns:</b> {{esbDoc.resources[selected.resource].returns.description}}</p>
              <ul ng-if="esbDoc.resources[selected.resource].returns.fields">
                <li ng-repeat="field in esbDoc.resources[selected.resource].returns.fields">
                  {{field.path}} <span ng-if="field.description">&ndash;</span> {{field.description}} <span ng-if="field.optional !== true">(required)</span>
                </li>
              </ul>
              <pre class="pre-scrollable" ng-if="esbDoc.resources[selected.resource].returns.example">{{esbDoc.resources[selected.resource].returns.example}}</pre>
            </div>

            <ul class="nav nav-tabs" role="tablist">
              <li ng-class="{active: selected.showDependencyMap}"><a href="#" ng-click="selected.showDependencyMap = true">Dependency Map</a></li>
              <li ng-class="{active: !selected.showDependencyMap}"><a href="#" ng-click="selected.showDependencyMap = false">Dependencies</a></li>
            </ul>
            <div ng-if="selected.resource && selected.showDependencyMap">
              <h2>Dependency Map</h2>
              <svg id="dagre"></svg>
            </div>

            <div ng-if="selected.resource && !selected.showDependencyMap">
              <h2>Dependencies</h2>
              <h3 ng-if="esbDoc.dependencies.forward[selected.resource]">Calls</h3>
              <ul class="nav nav-pills nav-stacked">
                <li ng-repeat="(name, value) in esbDoc.dependencies.forward[selected.resource]" >
                  <a href="" ng-click="selected.resource = value.source+value.target">{{value.source}}{{value.target}}, {{value.type}}</a>
                </li>
              </ul>
              <h3 ng-if="esbDoc.dependencies.reverse[selected.resource]">Called by</h3>
              <ul class="nav nav-pills nav-stacked">
                <li ng-repeat="(name, value) in esbDoc.dependencies.reverse[selected.resource]" style="color: #007; cursor: pointer;">
                  <a href="" ng-click="selected.resource = value.source+value.target">{{value.source}}{{value.target}}, {{value.type}}</a>
                </li>
              </ul>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- build:js(.) scripts/oldieshim.js -->
    <!--[if lt IE 9]>
    <script src="bower_components/es5-shim/es5-shim.js"></script>
    <script src="bower_components/json3/lib/json3.js"></script>
    <![endif]-->
    <!-- endbuild -->

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/affix.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/alert.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/button.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/carousel.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/collapse.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/dropdown.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tab.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/transition.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/scrollspy.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/modal.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tooltip.js"></script>
    <script src="bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/popover.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-cookies/angular-cookies.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-touch/angular-touch.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <script>

window.ESBDOCDATA = window.ESBDOCDATA || {};

window.ESBDOCDATA =

{"resources":{"ProjectOne_AddServiceNowAuthorizationProperty":{"purpose":"Adds ServiceNow basic authentication credentials to message header.","receives":{"description":"Any message that is sent to ServiceNow."},"returns":{"description":"Same message content but with basic authentication header."},"type":"sequence"},"ProjectOne_BillingInfoServiceNowEndpoint":{"type":"endpoint"},"ProjectOne_BillingInfoToFileProxy":{"type":"proxy"},"ProjectOne_BillingInfoToSapProxy":{"type":"proxy"},"ProjectOne_FetchBillingInfoFromServiceNowProxy":{"type":"proxy"},"ProjectOne_FetchProjectInfoFromServiceNowProxy":{"purpose":"Proxy gets Project Infos from ServiceNow.","receives":{"description":"Any message (also empty body is valid)"},"returns":{"description":"The response payload from ServiceNow containing Project Infos"},"type":"proxy"},"ProjectOne_ProjectInfoM2CSVEndpoint":{"type":"endpoint"},"ProjectOne_ProjectInfoServiceNowEndpoint":{"type":"endpoint"},"ProjectOne_ProjectInfoToFileProxy":{"purpose":"Writes Project Info(s) to a file. File destination: vfs:///tmp/projectone/ProjectInfo/in/Cases.csv","receives":{"description":"Proxy receives Project Infos in the same format that they were received from ServiceNow API.\n            Check ProjectOne_StripUnnecessaryProjectInfoFields.xsl resource for key fields."},"returns":{"description":"Proxy is OUT_ONLY type so no return payload."},"type":"proxy"},"ProjectOne_ProjectInfoToM2Proxy":{"purpose":"Triggers Project Info data transfer. Project Infos are fetched from ServiceNow and written in file for M2","receives":{"description":"Any message (also empty body is valid)"},"returns":{"description":"Proxy is OUT_ONLY type so no return payload."},"type":"proxy"},"ProjectOne_SendTravelExpenseToServiceNowJMSProxy":{"purpose":"This is a JMS proxy that is called by ActiveMQ. It redirects the given message to ProjectOne_SendTravelExpenseToServiceNowProxy\n        for actual processing.","receives":{"description":"A single Travel Expense"},"returns":{"description":"Nothing. Drops input message"},"type":"proxy"},"ProjectOne_SendTravelExpenseToServiceNowProxy":{"purpose":"Proxy sends given Travel Expense to ServiceNow.","receives":{"description":"A single Travel Expense. Check ProjectOne_M2CSVtoTravelExpense.xml smooks resource for input format."},"returns":{"description":"Returns response that was received from ServiceNow."},"type":"proxy"},"ProjectOne_TravelExpenseToServiceNowPollProxy":{"purpose":"Polls Travel Expense CSV data files from local folder and processes them one at a time.\n            File content is read to payload, transformed from CSV to XML and each Travel Expense is sent to ActiveMQ queue.","receives":{"description":"M2 Travel Expenses in CSV format"},"returns":{"description":"Proxy is a polling OUT_ONLY type so no return payload."},"type":"proxy"},"ProjectOne_TravelExpenseToServiceNowTriggerProxy":{"purpose":"Triggers Travel Expense data transfer. This proxy moves CSV files from M2 to a local folder that ESB\n            polls (Check ProjectOne_TravelExpenseToServiceNowPollProxy).","receives":{"description":"Any message (also empty body is valid)"},"returns":{"description":"OK or FAIL status.","example":"<response>OK</response>"},"type":"proxy"},"ProjectOne_TravelExpensesToServiceNowEndpoint":{"type":"endpoint"}},"dependencies":{"forward":{"ProjectOne_BillingInfoToSapProxy":[{"target":"ProjectOne_BillingInfoToFileProxy","type":"send"},{"target":"ProjectOne_FetchBillingInfoFromServiceNowProxy","type":"callout"}],"ProjectOne_FetchBillingInfoFromServiceNowProxy":[{"target":"ProjectOne_BillingInfoServiceNowEndpoint","type":"send"},{"target":"ProjectOne_AddServiceNowAuthorizationProperty","type":"sequence"}],"ProjectOne_FetchProjectInfoFromServiceNowProxy":[{"target":"ProjectOne_AddServiceNowAuthorizationProperty","type":"sequence"},{"target":"ProjectOne_ProjectInfoServiceNowEndpoint","type":"send"}],"ProjectOne_ProjectInfoToFileProxy":[{"target":"ProjectOne_ProjectInfoM2CSVEndpoint","type":"send"}],"ProjectOne_ProjectInfoToM2Proxy":[{"target":"ProjectOne_ProjectInfoToFileProxy","type":"send"},{"target":"ProjectOne_FetchProjectInfoFromServiceNowProxy","type":"callout"}],"ProjectOne_SendTravelExpenseToServiceNowJMSProxy":[{"target":"ProjectOne_SendTravelExpenseToServiceNowProxy","type":"callout"}],"ProjectOne_SendTravelExpenseToServiceNowProxy":[{"target":"ProjectOne_AddServiceNowAuthorizationProperty","type":"sequence"},{"target":"ProjectOne_TravelExpensesToServiceNowEndpoint","type":"send"}],"ProjectOne_TravelExpenseToServiceNowPollProxy":[{"target":"ProjectOne_SendTravelExpenseToServiceNowJMSProxy","type":"send"}],"ProjectOne_BillingInfoServiceNowEndpoint":[],"ProjectOne_ProjectInfoM2CSVEndpoint":[],"ProjectOne_ProjectInfoServiceNowEndpoint":[],"ProjectOne_TravelExpensesToServiceNowEndpoint":[]},"reverse":{"ProjectOne_BillingInfoToFileProxy":[{"source":"ProjectOne_BillingInfoToSapProxy","type":"send"}],"ProjectOne_FetchBillingInfoFromServiceNowProxy":[{"source":"ProjectOne_BillingInfoToSapProxy","type":"callout"}],"ProjectOne_FetchProjectInfoFromServiceNowProxy":[{"source":"ProjectOne_ProjectInfoToM2Proxy","type":"callout"}],"ProjectOne_ProjectInfoToFileProxy":[{"source":"ProjectOne_ProjectInfoToM2Proxy","type":"send"}],"ProjectOne_SendTravelExpenseToServiceNowJMSProxy":[{"source":"ProjectOne_TravelExpenseToServiceNowPollProxy","type":"send"}],"ProjectOne_SendTravelExpenseToServiceNowProxy":[{"source":"ProjectOne_SendTravelExpenseToServiceNowJMSProxy","type":"callout"}],"ProjectOne_AddServiceNowAuthorizationProperty":[{"source":"ProjectOne_FetchBillingInfoFromServiceNowProxy","type":"sequence"},{"source":"ProjectOne_FetchProjectInfoFromServiceNowProxy","type":"sequence"},{"source":"ProjectOne_SendTravelExpenseToServiceNowProxy","type":"sequence"}],"ProjectOne_BillingInfoServiceNowEndpoint":[{"source":"ProjectOne_FetchBillingInfoFromServiceNowProxy","type":"send"}],"ProjectOne_ProjectInfoM2CSVEndpoint":[{"source":"ProjectOne_ProjectInfoToFileProxy","type":"send"}],"ProjectOne_ProjectInfoServiceNowEndpoint":[{"source":"ProjectOne_FetchProjectInfoFromServiceNowProxy","type":"send"}],"ProjectOne_TravelExpensesToServiceNowEndpoint":[{"source":"ProjectOne_SendTravelExpenseToServiceNowProxy","type":"send"}]}}}
;

    </script>

        <!-- build:js({.tmp,app}) scripts/scripts.js -->
        <script src="scripts/d3.js"></script>
        <script src="scripts/dagre-d3.js"></script>
        <script src="scripts/app.js"></script>
        <script src="scripts/controllers/main.js"></script>
        <script src="scripts/controllers/about.js"></script>
        <!-- endbuild -->
</body>
</html>
